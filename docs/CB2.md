# CB2

<img src=img/CB2/CB2_Title.png width="500" />

## **Product Profile**

The BIGTREETECH CB2, compatible with the Raspberry Pi CM4 form factor, uses two 100-pin high-speed board-to-board (BTB) connectors for easy and quick connection with external expansion baseboards. It offers an alternative with similar IO capabilities, 
including Micro HDMI, USB, Gigabit Ethernet, DSI, and CSI outputs. Additionally, it features 2.4G and 5G WiFi, Bluetooth 5.2, the Rockchip RK3566 SoC, 2GB LPDDR4 RAM, and 32GB eMMC storage.

**Product Link:** [BIGTREETECH Official Website](https://biqu.equipment/products/bigtreetech-pi-2-cb2?variant=41018191839330)

## **Features Highlights**

* CPU: Rockchip RK3566, quad-core Cortex-A55 @1.8GHz
* GPU: Mali-G52 1-Core-2EE
* NPU: 0.8 TOPS NPU
* RAM: 2GB/4GB LPDDR4
* Onboard EMMC
* MIPI DSI display support
* Dual-lane MIPI CSI-2 Camera Interface 
* 3x USB 2.0 ports, 1x USB 3.0 port
* PCIe 2.1 1x1 Lane
* Gigabit Ethernet +433Mbps WiFi+BT5.0
* 40-pin GPIO
* BTB socket that is completely identical to the one on the Raspberry Pi CM4

## **Specifications**

| **Dimensions**          | **40mm x 55mm**                                    |
| ----------------------- | -------------------------------------------------- |
| **Mounting Dimensions** | **33mm x 48mm**                                    |
| **Input Voltage**       | **5V±5%/2A**                                       |
| **Output Voltage**      | **3.3V±2%/100mA**                                  |
| **Output Voltage**      | **1.8V±2%/100mA**                                  |
| **WiFi**                | **2.4G/5G, 802.11 ac/a/b/g/n/ wireless standards** |

## **Dimensions**

<img src=img/CB2/CB2_Dimensions.png width="600" />

## **Peripheral Interface**

### Pin Description

| **<font  color="red">PIN</font>** | **<font  color="red">Connector</font>** |      **<font  color="red">Signal</font>**       |      **<font  color="red">Description</font>**      |
| :-------------------------------: | :-------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: |
|               **1**               |           **A connector_01**            |      **<font  color="purple">GND</font>**       |                                                     |
|               **2**               |           **A connector_02**            |      **<font  color="purple">GND</font>**       |                                                     |
|               **3**               |           **A connector_03**            |   **<font  color="green">GBIT_MDI3_P</font>**   |                                                     |
|               **4**               |           **A connector_04**            |   **<font  color="green">GBIT_MDI1_P</font>**   |                                                     |
|               **5**               |           **A connector_05**            |   **<font  color="green">GBIT_MDI3_N</font>**   |                                                     |
|               **6**               |           **A connector_06**            |   **<font  color="green">GBIT_MDI1_N</font>**   |                                                     |
|               **7**               |           **A connector_07**            |      **<font  color="purple">GND</font>**       |                                                     |
|               **8**               |           **A connector_08**            |      **<font  color="purple">GND</font>**       |                                                     |
|               **9**               |           **A connector_09**            |   **<font  color="green">GBIT_MDI2_N</font>**   |                                                     |
|              **10**               |           **A connector_10**            |   **<font  color="green">GBIT_MDI0_N</font>**   |                                                     |
|              **11**               |           **A connector_11**            |   **<font  color="green">GBIT_MDI2_P</font>**   |                                                     |
|              **12**               |           **A connector_12**            |   **<font  color="green">GBIT_MDI0_P</font>**   |                                                     |
|              **13**               |           **A connector_13**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **14**               |           **A connector_14**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **15**               |           **A connector_15**            |    **<font  color="green">1000M_LED</font>**    |                                                     |
|              **16**               |           **A connector_16**            |  **<font  color="green">CAMERAB_PDN_L</font>**  |                                                     |
|              **17**               |           **A connector_17**            |    **<font  color="green">100M_LED</font>**     |                                                     |
|              **18**               |           **A connector_18**            |   **<font  color="green">SPDIF_TX_M2</font>**   |                                                     |
|              **19**               |           **A connector_19**            |     **<font  color="green">PWM3_IR</font>**     |                                                     |
|              **20**               |           **A connector_20**            |        **<font  color="red">NC</font>**         |                                                     |
|              **21**               |           **A connector_21**            | **<font  color="green">WORKING_LEDEN_H</font>** |                                                     |
|              **22**               |           **A connector_22**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **23**               |           **A connector_23**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **24**               |           **A connector_24**            |    **<font  color="green">GPIO0_C3</font>**     |                                                     |
|              **25**               |           **A connector_25**            |    **<font  color="green">GPIO4_C2</font>**     |                                                     |
|              **26**               |           **A connector_26**            |    **<font  color="green">GPIO4_C5</font>**     |                                                     |
|              **27**               |           **A connector_27**            |    **<font  color="green">GPIO4_C3</font>**     |                                                     |
|              **28**               |           **A connector_28**            |    **<font  color="green">GPIO0_C0</font>**     |                                                     |
|              **29**               |           **A connector_29**            |    **<font  color="green">GPIO0_A0</font>**     |                                                     |
|              **30**               |           **A connector_30**            |    **<font  color="green">GPIO3_D7</font>**     |                                                     |
|              **31**               |           **A connector_31**            |    **<font  color="green">GPIO0_C1</font>**     |                                                     |
|              **32**               |           **A connector_32**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **33**               |           **A connector_33**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **34**               |           **A connector_34**            |        **<font  color="red">NC</font>**         |                                                     |
|              **35**               |           **A connector_35**            |    **<font  color="green">GPIO0_B3</font>**     |                                                     |
|              **36**               |           **A connector_36**            |    **<font  color="green">GPIO0_B4</font>**     |                                                     |
|              **37**               |           **A connector_37**            |    **<font  color="green">GPIO0_A6</font>**     |                                                     |
|              **38**               |           **A connector_38**            |    **<font  color="green">GPIO3_C3</font>**     |                                                     |
|              **39**               |           **A connector_39**            |    **<font  color="green">GPIO4_A2</font>**     |                                                     |
|              **40**               |           **A connector_40**            |    **<font  color="green">GPIO3_C2</font>**     |                                                     |
|              **41**               |           **A connector_41**            |    **<font  color="green">GPIO3_C4</font>**     |                                                     |
|              **42**               |           **A connector_42**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **43**               |           **A connector_43**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **44**               |           **A connector_44**            |    **<font  color="green">GPIO3_C1</font>**     |                                                     |
|              **45**               |           **A connector_45**            |    **<font  color="green">GPIO4_A3</font>**     |                                                     |
|              **46**               |           **A connector_46**            |    **<font  color="green">GPIO1_A1</font>**     |                                                     |
|              **47**               |           **A connector_47**            |    **<font  color="green">GPIO4_C6</font>**     |                                                     |
|              **48**               |           **A connector_48**            |    **<font  color="green">GPIO1_A0</font>**     |                                                     |
|              **49**               |           **A connector_49**            |    **<font  color="green">GPIO0_C0</font>**     |                                                     |
|              **50**               |           **A connector_50**            |    **<font  color="green">GPIO0_C7</font>**     |                                                     |
|              **51**               |           **A connector_51**            |    **<font  color="green">GPIO0_D0</font>**     |     **<font  color="green">DEBUG UART</font>**      |
|              **52**               |           **A connector_52**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **53**               |           **A connector_53**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **54**               |           **A connector_54**            |    **<font  color="green">GPIO3_A1</font>**     |                                                     |
|              **55**               |           **A connector_55**            |    **<font  color="green">GPIO0_D1</font>**     |     **<font  color="green">DEBUG UART</font>**      |
|              **56**               |           **A connector_56**            |    **<font  color="green">GPIO4_B3</font>**     |                                                     |
|              **57**               |           **A connector_57**            |    **<font  color="green">SDC0-CLK</font>**     | **<font  color="green">SDCARD Clock signal</font>** |
|              **58**               |           **A connector_58**            |    **<font  color="green">GPIO4_B2</font>**     |                                                     |
|              **59**               |           **A connector_59**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **60**               |           **A connector_60**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **61**               |           **A connector_61**            |     **<font  color="green">SDC0-D3</font>**     | **<font  color="green">SDCARD Data3 signal</font>** |
|              **62**               |           **A connector_62**            |    **<font  color="green">SDC0-CMD</font>**     |  **<font  color="green">SDCARD CMD signal</font>**  |
|              **63**               |           **A connector_63**            |     **<font  color="green">SDC0-D0</font>**     | **<font  color="green">SDCARD Data0 signal</font>** |
|              **64**               |           **A connector_64**            |       **<font  color="green">NC</font>**        |                                                     |
|              **65**               |           **A connector_65**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **66**               |           **A connector_66**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **67**               |           **A connector_67**            |     **<font  color="green">SDC0-D1</font>**     | **<font  color="green">SDCARD Data1 signal</font>** |
|              **68**               |           **A connector_68**            |       **<font  color="green">NC</font>**        |                                                     |
|              **69**               |           **A connector_69**            |     **<font  color="green">SDC0-D2</font>**     | **<font  color="green">SDCARD Data2 signal</font>** |
|              **70**               |           **A connector_70**            |       **<font  color="green">NC</font>**        |                                                     |
|              **71**               |           **A connector_71**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **72**               |           **A connector_72**            |       **<font  color="green">NC</font>**        |                                                     |
|              **73**               |           **A connector_73**            |    **<font  color="green">GPIO0_B5</font>**     |                                                     |
|              **74**               |           **A connector_74**            |      **<font  color="purple">GND</font>**       |                                                     |
|              **75**               |           **A connector_75**            |    **<font  color="green">GPIO3_D2</font>**     |                                                     |
|              **76**               |           **A connector_76**            |    **<font  color="green">GPIO3_D3</font>**     |    **<font  color="green">SDCARD detect</font>**    |
|              **77**               |           **A connector_77**            |      **<font  color="red">VCC_5V</font>**       |                    **5V IN /2A**                    |
|              **78**               |           **A connector_78**            |        **<font  color="red">NC</font>**         |                                                     |
|              **79**               |           **A connector_79**            |      **<font  color="red">VCC_5V</font>**       |                    **5V IN /2A**                    |
|              **80**               |           **A connector_80**            |    **<font  color="green">GPIO4_B5</font>**     |                                                     |
|              **81**               |           **A connector_81**            |      **<font  color="red">VCC_5V</font>**       |                    **5V IN /2A**                    |
|              **82**               |           **A connector_82**            |    **<font  color="green">GPIO4_B4</font>**     |                                                     |
|              **83**               |           **A connector_83**            |      **<font  color="red">VCC_5V</font>**       |                    **5V IN /2A**                    |
|              **84**               |           **A connector_84**            |        **<font  color="red">3V3</font>**        |                 **3.3v out /200mA**                 |
|              **85**               |           **A connector_85**            |      **<font  color="red">VCC_5V</font>**       |                    **5V IN /2A**                    |
|              **86**               |           **A connector_86**            |        **<font  color="red">3V3</font>**        |                 **3.3v out /200mA**                 |
|              **87**               |           **A connector_87**            |      **<font  color="red">VCC_5V</font>**       |                    **5V IN /2A**                    |
|              **88**               |           **A connector_88**            |        **<font  color="red">1V8</font>**        |                 **1.8v out /100mA**                 |
|              **89**               |           **A connector_89**            |    **<font  color="green">GPIO3_B4</font>**     |                                                     |
|              **90**               |           **A connector_90**            |        **<font  color="red">1V8</font>**        |                 **1.8v out /100mA**                 |
|              **91**               |           **A connector_91**            |        **<font  color="red">NC</font>**         |                                                     |
|              **92**               |           **A connector_92**            |      **<font  color="green">PWRON</font>**      |                                                     |
|              **93**               |           **A connector_93**            |    **<font  color="green">RECOVERY</font>**     |                                                     |
|              **94**               |           **A connector_94**            |        **<font  color="red">NC</font>**         |                                                     |
|              **95**               |           **A connector_95**            |    **<font  color="green">GPIO4_A1</font>**     |                                                     |
|              **96**               |           **A connector_96**            |        **<font  color="red">NC</font>**         |                                                     |
|              **97**               |           **A connector_97**            |    **<font  color="green">GPIO4_A5</font>**     |                                                     |
|              **98**               |           **A connector_98**            |      <font  color="purple">**GND**</font>       |                                                     |

|  99  | **A connector_99**  |     <font  color="green">**PMIC_PWRON**</font>     |                                                    |
| :--: | :-----------------: | :------------------------------------------------: | :------------------------------------------------: |
| 100  | **A connector_100** |      <font  color="green">**AP-RESET**</font>      |                                                    |
| 101  |  **B connector_1**  |    <font  color="green">**USB_OTG0_ID**</font>     |                                                    |
| 102  |  **B connector_2**  | <font  color="green">**PCIE20_CLKREQn_M 2**</font> |                                                    |
| 103  |  **B connector_3**  |    <font  color="green">**USB_OTG0_DM**</font>     |                                                    |
| 104  |  **B connector_4**  |      <font  color="green">**LINEOUTL**</font>      |                                                    |
| 105  |  **B connector_5**  |    <font  color="green">**USB_OTG0_DP**</font>     |                                                    |
| 106  |  **B connector_6**  |      <font  color="green">**LINEOUTR**</font>      |                                                    |
| 107  |  **B connector_7**  |        <font  color="purple">**GND**</font>        |                                                    |
| 108  |  **B connector_8**  |        <font  color="purple">**GND**</font>        |                                                    |
| 109  |  **B connector_9**  |  <font  color="green">**PCIE20_PERSTn_M2**</font>  |                                                    |
| 110  | **B connector_10**  |   <font  color="green">**PCIE20_REFCLKP**</font>   |                                                    |
| 111  | **B connector_11**  |      <font  color="green">**GPIO4_B0**</font>      |                                                    |
| 112  | **B connector_12**  |   <font  color="green">**PCIE20_REFCLKN**</font>   |                                                    |
| 113  | **B connector_13**  |        <font  color="purple">**GND**</font>        |                                                    |
| 114  | **B connector_14**  |        <font  color="purple">**GND**</font>        |                                                    |
| 115  | **B connector_15**  |  <font  color="green">**MIPI_CSI_RX_D0N**</font>   |                                                    |
| 116  | **B connector_16**  |     <font  color="green">**PCIE20_RXP**</font>     |                                                    |
| 117  | **B connector_17**  |  <font  color="green">**MIPI_CSI_RX_D0P**</font>   |                                                    |
| 118  | **B connector_18**  |     <font  color="green">**PCIE20_RXN**</font>     |                                                    |
| 119  | **B connector_19**  |        <font  color="purple">**GND**</font>        |                                                    |
| 120  | **B connector_20**  |        <font  color="purple">**GND**</font>        |                                                    |
| 121  | **B connector_21**  |  <font  color="green">**MIPI_CSI_RX_D1N**</font>   |                                                    |
| 122  | **B connector_22**  |     <font  color="green">**PCIE20_TXP**</font>     |                                                    |
| 123  | **B connector_23**  |  <font  color="green">**MIPI_CSI_RX_D1P**</font>   |                                                    |
| 124  | **B connector_24**  |     <font  color="green">**PCIE20_TXN**</font>     |                                                    |
| 125  | **B connector_25**  |        <font  color="purple">**GND**</font>        |                                                    |
| 126  | **B connector_26**  |        <font  color="purple">**GND**</font>        |                                                    |
| 127  | **B connector_27**  | <font  color="green">**MIPI_CSI_RX_CLK0N**</font>  |                                                    |
| 128  | **B connector_28**  |      <font  color="green">**USB3-DM**</font>       |                                                    |
| 129  | **B connector_29**  | <font  color="green">**MIPI_CSI_RX_CLK0P**</font>  |                                                    |
| 130  | **B connector_30**  |      <font  color="green">**USB3-DP**</font>       |                                                    |
| 131  | **B connector_31**  |        <font  color="purple">**GND**</font>        |                                                    |
| 132  | **B connector_32**  |        <font  color="purple">**GND**</font>        |                                                    |
| 133  | **B connector_33**  |  <font  color="green">**MIPI_CSI_RX_D2N**</font>   |                                                    |
| 134  | **B connector_34**  |      <font  color="green">**MIC1_IN**</font>       |                                                    |
| 135  | **B connector_35**  |  <font  color="green">**MIPI_CSI_RX_D2P**</font>   |                                                    |
| 136  | **B connector_36**  |      <font  color="green">**MIC2_IN**</font>       |                                                    |
| 137  | **B connector_37**  |        <font  color="purple">**GND**</font>        |                                                    |
| 138  | **B connector_38**  |        <font  color="purple">**GND**</font>        |                                                    |
| 139  | **B connector_39**  |  <font  color="green">**MIPI_CSI_RX_D3N**</font>   |                                                    |
| 140  | **B connector_40**  | <font  color="green">**MIPI_CSI_RX_CLK1N**</font>  |                                                    |
| 141  | **B connector_41**  |  <font  color="green">**MIPI_CSI_RX_D3P**</font>   |                                                    |
| 142  | **B connector_42**  | <font  color="green">**MIPI_CSI_RX_CLK1P**</font>  |                                                    |
| 143  | **B connector_43**  |      <font  color="green">**GPIO4_A7**</font>      |                                                    |
| 144  | **B connector_44**  |        <font  color="purple">**GND**</font>        |                                                    |
| 145  | **B connector_45**  |       <font  color="green">**HP_SNS**</font>       |                                                    |
| 146  | **B connector_46**  |   <font  color="green">**USB2_HOST2_DP** </font>   |                                                    |
| 147  | **B connector_47**  |      <font  color="green">**HP_DET_L**</font>      |                                                    |
| 148  | **B connector_48**  |   <font  color="green">**USB2_HOST2_DM**</font>    |                                                    |
| 149  | **B connector_49**  |    <font  color="green">**SARADC_VIN2**</font>     |                                                    |
| 150  | **B connector_50**  |        <font  color="purple">**GND**</font>        |                                                    |
| 151  | **B connector_51**  |        <font  color="green">**HCEC**</font>        |      <font  color="green">**HDMI CEC**</font>      |
| 152  | **B connector_52**  |   <font  color="green">**USB3_HOST1_DP**</font>    |                                                    |
| 153  | **B connector_53**  |        <font  color="green">**HHPD**</font>        |    <font  color="green">**HDMI Hotplug**</font>    |
| 154  | **B connector_54**  |   <font  color="green">**USB3_HOST1_DM**</font>    |                                                    |
| 155  | **B connector_55**  |        <font  color="purple">**GND**</font>        |                                                    |
| 156  | **B connector_56**  |        <font  color="purple">**GND**</font>        |                                                    |
| 157  | **B connector_57**  |  <font  color="green">**MIPI_DSI_TX0_D0N**</font>  |                                                    |
| 158  | **B connector_58**  |  <font  color="green">**USB3_HOST1_SSTXP**</font>  |                                                    |
| 159  | **B connector_59**  |  <font  color="green">**MIPI_DSI_TX0_D0P**</font>  |                                                    |
| 160  | **B connector_60**  |  <font  color="green">**USB3_HOST1_SSTXN**</font>  |                                                    |
| 161  | **B connector_61**  |        <font  color="purple">**GND**</font>        |                                                    |
| 162  | **B connector_62**  |        <font  color="purple">**GND**</font>        |                                                    |
| 163  | **B connector_63**  |  <font  color="green">**MIPI_DSI_TX0_D1N**</font>  |                                                    |
| 164  | **B connector_64**  |  <font  color="green">**USB3_HOST1_SSRXP**</font>  |                                                    |
| 165  | **B connector_65**  |  <font  color="green">**MIPI_DSI_TX0_D1P**</font>  |                                                    |
| 166  | **B connector_66**  |  <font  color="green">**USB3_HOST1_SSRXN**</font>  |                                                    |
| 167  | **B connector_67**  |        <font  color="purple">**GND**</font>        |                                                    |
| 168  | **B connector_68**  |        <font  color="purple">**GND**</font>        |                                                    |
| 169  | **B connector_69**  | <font  color="green">**MIPI_DSI_TX0_CLKN**</font>  |                                                    |
| 170  | **B connector_70**  |       <font  color="green">**HTX2P**</font>        | <font  color="green">**HDMI TX2 Positive.**</font> |
| 171  | **B connector_71**  | <font  color="green">**MIPI_DSI_TX0_CLKP**</font>  |                                                    |
| 172  | **B connector_72**  |       <font  color="green">**HTX2N**</font>        | <font  color="green">**HDMI TX2 Negative.**</font> |
| 173  | **B connector_73**  |        <font  color="purple">**GND**</font>        |                                                    |
| 174  | **B connector_74**  |        <font  color="purple">**GND**</font>        |                                                    |
| 175  | **B connector_75**  |  <font  color="green">**MIPI_DSI_TX1_D0N**</font>  |                                                    |
| 176  | **B connector_76**  |       <font  color="green">**HTX1P**</font>        | <font  color="green">**HDMI TX1 Positive.**</font> |
| 177  | **B connector_77**  |  <font  color="green">**MIPI_DSI_TX1_D0P**</font>  |                                                    |
| 178  | **B connector_78**  |       <font  color="green">**HTX1N**</font>        | <font  color="green">**HDMI TX1 Negative.**</font> |
| 179  | **B connector_79**  |        <font  color="purple">**GND**</font>        |                                                    |
| 180  | **B connector_80**  |        <font  color="purple">**GND**</font>        |                                                    |
| 181  | **B connector_81**  |  <font  color="green">**MIPI_DSI_TX1_D1N**</font>  |                                                    |
| 182  | **B connector_82**  |       <font  color="green">**HTX0P**</font>        | <font  color="green">**HDMI TX0 Positive.**</font> |
| 183  | **B connector_83**  |  <font  color="green">**MIPI_DSI_TX1_D1P**</font>  |                                                    |
| 184  | **B connector_84**  |       <font  color="green">**HTX0N**</font>        | <font  color="green">**HDMI TX0 Negative.**</font> |
| 185  | **B connector_85**  |        <font  color="purple">**GND**</font>        |                                                    |
| 186  | **B connector_86**  |        <font  color="purple">**GND**</font>        |                                                    |
| 187  | **B connector_87**  | <font  color="green">**MIPI_DSI_TX1_CLKN**</font>  |                                                    |
| 188  | **B connector_88**  |       <font  color="green">**HTXCP**</font>        | <font  color="green">**HDMI CLK Positive.**</font> |
| 189  | **B connector_89**  | <font  color="green">**MIPI_DSI_TX1_CLKP**</font>  |                                                    |
| 190  | **B connector_90**  |       <font  color="green">**HTXCN**</font>        | <font  color="green">**HDMI CLK Negative.**</font> |
| 191  | **B connector_91**  |        <font  color="purple">**GND**</font>        |                                                    |
| 192  | **B connector_92**  |        <font  color="purple">**GND**</font>        |                                                    |
| 193  | **B connector_93**  |  <font  color="green">**MIPI_DSI_TX1_D2N**</font>  |                                                    |
| 194  | **B connector_94**  |  <font  color="green">**MIPI_DSI_TX1_D3N**</font>  |                                                    |
| 195  | **B connector_95**  |  <font  color="green">**MIPI_DSI_TX1_D2P**</font>  |                                                    |
| 196  | **B connector_96**  |  <font  color="green">**MIPI_DSI_TX1_D3P**</font>  |                                                    |
| 197  | **B connector_97**  |        <font  color="purple">**GND**</font>        |                                                    |

| **198** | **B connector_97**  | **<font  color="purple">GND</font>** |                                          |
| :-----: | :-----------------: | :----------------------------------: | :--------------------------------------: |
| **199** | **B connector_99**  | **<font  color="green">HSDA</font>** | **<font  color="green">HDMI I2C</font>** |
| **200** | **B connector_100** | **<font  color="green">HSCL</font>** | **<font  color="green">HDMI I2C</font>** |

## **Interface Introduction**

### SW1 Button Explanation

Pressing and holding down SW1 will short-circuit the eMMC signal line to GND, prohibiting communication between SoC and eMMC.

<img src=img/CB2/CB2_Interface1.png width="450" />

<img src=img/CB2/CB2_Interface2.png width="450" />

### 40 pin GPIO

<img src=img/Pi2/Pi2_GPIO.png width="1200" />

The calculation method for GPIO pins is as follows:

GPIO4_B2 = (‘B’ - ‘A’) * 8 + 2 = 1 * 8 + 2 = gpiochip4/gpio10

GPIO3_D7 = (‘D’ - ‘A’) * 8 + 7 = 3 * 8 + 7 = gpiochip3/gpio31

## **Flashing the System**

### Download the System Image

Only use the image provided in the link: https://github.com/bigtreetech/CB2/releases

### Write System to MicroSD Card

1、Download the balenaEtcher software from [https://www.balena.io/etcher/], install, and run it.

2、Insert the MicroSD card via a card reader. 

3、Select your downloaded image.

<img src=img/CB2/CB2_System1.png width="600" />

4、Select the MicroSD card and click "Flash" (WRITE the image will format the MicroSD card. Be careful not to select the wrong storage device, otherwise the data will be formatted). 

<img src=img/CB2/CB2_System2.png width="600" />

5、Wait for the process to complete.

<img src=img/CB2/CB2_System3.png width="600" />

### Writing System onto eMMC

Using RKDevTool (Windows) to Write the eMMC 

Download and unzip RKDevTool from the GitHub repository (https://github.com/bigtreetech/CB2) to your computer. DO NOT insert a MicroSD card.

1、Turn the DIP switch 4 (USBOTG) and 3 (RPIBOOT) to the ON position to enter BOOT mode.

<img src=img/CB2/CB2_System4.png width="600" />

2、Then, connect the Type-C cable to the computer.

3、Install the driver:

​	① In “Device Manager”, if you see “Unknown Device”, it indicates that the computer is missing drivers.

<img src=img/CB2/CB2_System5.png width="600" />

​	② Open the DriverAssistant tool in the downloaded RKDevTool folder, click “①Uninstall Driver”, then click “② Install Driver” to ensure that the latest version of the driver is installed.

<img src=img/CB2/CB2_System6.png width="600" />

 ③After the installation is complete, hold down the “Recovery” button, replug the Type-C cable. "Device Manager" should now recognize a “Rockusb Device”, indicating that the driver installation is successful.

<img src=img/CB2/CB2_System7.png width="600" />

​	④Open the “RKDevTool” software:

<img src=img/CB2/CB2_System8.png width="600" />

**Note:** The parameters in the software are set by default as shown in the image. Normally, you only need to set the “④ actual path of the .img system”. If the parameters in your software do not match those in the image, manually adjust them to match.

<img src=img/CB2/CB2_System9.png width="600" />

①Find the path where the downloaded RKDevTool is located.

②Open the RKDevTool tool.

③The software will recognize a “LOADER” or “MASKROOM” device.

④Select the system to be written (the OS image must be unzipped as a .img file beforehand; RKDevTool does not support directly writing compressed .xz files).

⑤Check “Write by Address”.

⑥Click “Run” to start writting the system.

⑦“Download image OK” indicates that the system has been successfully burned.

5、After writing is complete, toggle the USB OTG switch to the OFF position to boot normally. Note: Files on the eMMC cannot be accessed by the computer like those on a MicroSD card, so you cannot modify the system.cfg configuration file to set up the WiFi network. Instead, use an Ethernet cable or USB-to-UART connection to configure the terminal.

### Writing System onto eMMC Using a MicroSD Card

1、First, write the system onto the MicroSD card. Then, insert the MicroSD card into the motherboard's card slot and wait for the system to boot.

2、Connect to the system terminal via Ethernet cable, WiFi, or USB to UART, and log in to the system.

login: `biqu`

password: `biqu`

Execute the command sudo nand-sata-install. In the interface that pops up, select "2 

Boot From eMMC - system on eMMC" and then select "OK"

<img src=img/CB2/CB2_System10.png width="600" />

①Select "Yes" to start erasing and writing the system onto the eMMC.

<img src=img/CB2/CB2_System11.png width="600" />

②Choose the filesystem "1 ext4" and then select "OK".

<img src=img/CB2/CB2_System12.png width="600" />

③Wait for the writing process to complete.

<img src=img/CB2/CB2_System13.png width="600" />

④Upon completion, you will be prompted whether to power off. Select “Power off” to shut down the system.

<img src=img/CB2/CB2_System14.png width="600" />

⑤After the system has powered down, disconnect the power supply, remove the MicroSD card, and then reconnect power. The system should now boot from the eMMC.

### Erasing eMMC

When using a MicroSD card as the system card instead, it's best to erase the data on the eMMC to prevent the motherboard from booting from it by mistake.

#### Using RKDevTool (Windows) to Erase eMMC 

1、Refer to the steps in "4.3.1 Using RKDevTool to Write the eMMC (Windows)" to connect the motherboard to the computer.

2、Open the "RKDevTool".

<img src=img/CB2/CB2_System15.png width="450" />

①Find the path where the downloaded RKDevTool is located.

②Open the RKDevTool.

③The software will recognize a "LOADER" device. If it recognizes "MASKROOM," it indicates there is no data in the eMMC, hence no erase operation is necessary.

④Click "Advanced Function."

⑤Click "EraseAll" to begin erasing data from the eMMC.

⑥"Erasing sectors success" indicates the erasure is complete.

#### Erasing eMMC After Booting from MicroSD Card

1、Refer to the steps in "4.3.2 Writing System onto eMMC Using a MicroSD Card" and log into the system terminal. 

2、Run the command sudo mkfs /dev/mmcblk1 and then enter "y" to confirm. 

<img src=img/CB2/CB2_System16.png width="600" />

## **System Configuration**

### Using Ethernet

Ethernet is plug-and-play and requires no additional setup.

### Setting Up WiFi

After the system image has been written, the MicroSD card will have a FAT32 partition recognized by the computer. In this partition, there is a "system.cfg" file. Open it and replace "Your SSID" with your actual WiFi name and "Your Password" with the actual password.

<img src=img/CB2/CB2_System17.png width="600" />

### Configuring Overlays

Open the "armbianEnv.txt" file in the BOOT partition and set the values for overlays. The configuration file supports only one line of overlays at a time; if multiple overlays are enabled, only the last line will take effect. If you need multiple overlays, place the contents of multiple configurations on the same line separated by a space. For example, if you need to use a DSI screen, MCP2515 SPI to CAN module, and I2C1 simultaneously:

overlays=dsi mcp2515 i2c1

<img src=img/CB2/CB2_System18.png width="600" />

### Configuring the Display

1、Open the "armbianEnv.txt" file in the BOOT partition.

<img src=img/CB2/CB2_System19.png width="600" />

2、The default overlay is set to "hdmi," meaning the system uses an HDMI screen by default. This can be changed to match the actual screen being used, such as: 

· "hdmi": [HDMI screen](https://biqu.equipment/collections/lcd/products/bigtreetech-hdmi5-v1-0-hdmi7-v1-0)

· "dsi": [DSI screen](https://biqu.equipment/collections/lcd/products/bigtreetech-pi-tft43-v2-0-screen-board)

· "tft_35": [SPI Screen](https://biqu.equipment/collections/lcd/products/bigtreetech-tft35-spi-v2-1-touchscreen-io2can-module)

· 

For "tft_35", there is also a "tft35_spi_rotate" parameter for system-level screen rotation, with default "0" meaning no rotation, other options include "90", "180", "270".

**Note:** Only one screen type can be used at a time. 

3、To configure KlipperScreen, open the `system.cfg` file in the BOOT partition. Set the screen type with the parameter `ks_src`, and the rotation angle with `ks_angle`.

<img src=img/CB2/CB2_System20.png width="600" />

### Using SPI to CAN

Open the "armbianEnv.txt" file in the BOOT partition and add "mcp2515" to the overlays configuration.

<img src=img/CB2/CB2_System21.png width="600" />

### Using CSI Camera and Crowsnest Configuration

For both RPi v1.3 ov5647 and RPi v2 imx219 cameras, no specific configuration in "armbianEnv.txt" is required as they are plug-and-play. "crowsnest.conf" file configuration is as follows:

<font  color="blue">**device: /dev/video0**</font> # The CSI camera node is fixed as video0

<font  color="blue">**custom_flags: --format=UYVY**</font> # The current system's CSI camera does not support the default YUYV, so it needs to be set to the supported UYVY format.

<img src=img/CB2/CB2_System22.png width="600" />

### Using Bluetooth

1、To scan for Bluetooth devices, enter the following command, and a list of Bluetooth devices will appear as shown below:

<font  color="blue">**bluetoothctl --timeout 15 scan on**</font>

<img src=img/CB2/CB2_System23.png width="600" />

2、Find your Bluetooth device, for example, if your device name is "HONOR xSport PRO", locate the corresponding Bluetooth MAC ID as shown below.

<img src=img/CB2/CB2_System24.png width="600" />

3、To connect to a Bluetooth device, enter the following command, connection success is shown as below

<font  color="blue">**bluetoothctl connect E0:9D:FA:50:CD:4F**</font>

<img src=img/CB2/CB2_System25.png width="600" />

①If there's an issue while connecting, as shown below, please restart the Bluetooth device and repeat steps 1 and 2 to connect.

<img src=img/CB2/CB2_System26.png width="600" />

②If there's an issue while connecting, as shown below, please enter the following commands and then repeat steps 1 and 2:

<font  color="blue">**bluetoothctl remove E0:9D:FA:50:CD:4F**</font> <font  color="red">**(Your Bluetooth device's corresponding MAC ID)**</font>

<font  color="blue">**rfkill block bluetooth**</font>

<font  color="blue">**sleep 3s**</font>

<font  color="blue">**rfkill unblock bluetooth**</font>

<font  color="blue">**pulseaudio -k**</font>

<font  color="blue">**pulseaudio –start**</font>

<img src=img/CB2/CB2_System27.png width="600" />

4、 If you exit voice playback during the use of Bluetooth and cannot reuse it, manually delete the corresponding playback process. Use the ps command to view the process number, then use kill -9 process_number to delete the corresponding playback process.

<img src=img/CB2/CB2_System28.png width="600" />

### Setting up 3.5mm Headphones Port

1、Enter the command: <font  color="blue">**aplay -l**</font>

Check for the corresponding sound card, as shown in the image (the sound card for the headphone port shown in the image corresponds to <font  color="blue">**card 0**</font>).

<img src=img/CB2/CB2_System29.png width="600" />

2、Enter the command:

<font  color="blue">**amixer -c 0 contents**</font>(0 represents the card 0 found in the previous <font  color="blue">**aplay -l**</font> command)

Check the settings for playback and recording channels, as shown in the image.

<img src=img/CB2/CB2_System30.png width="600" />

3、Enter the command:

<font  color="blue">**amixer -c 0 cset numid=1 3**</font>

Set the playback channel, as shown in the image.

<img src=img/CB2/CB2_System31.png width="600" />

4、Enter the command:

<font  color="blue">**amixer -c 0 cset numid=2 1**</font>

Set the recording channel, as shown in the image.

<img src=img/CB2/CB2_System32.png width="600" />

5、Enter the following command to play audio, with the audio file directory xxx and the audio file name xxxxx.wav:

<font  color="blue">**aplay -D plughw:0,0 /xxx/xxxxx.wav**</font>

6、Enter the following command to record (where 10 represents recording for 10 seconds), storing the recording in directory xxx, file name xxxx.wav:

<font  color="blue">**sudo arecord -Dhw:0,0 -d 10 -f cd -r 44100 -c 2 -t wav /xxx/xxxx.wav**</font>

7、Enter the following command to play the recording:

<font  color="blue">**aplay -D plughw:0,0 /xxx/xxxx.wav**</font>

## **SSH Connect to Device**

1、Install the SSH software Mobaxterm: https://mobaxterm.mobatek.net/download-home-edition.html

2、After powering on, wait for the system to boot, which typically takes about 1 to 2 minutes.

3、Once the device is connected to WiFi or an Ethernet cable is plugged in, it will automatically be assigned an IP address.

4、Access the router management interface to find the device's IP (it should be BTT-CB2 here).

<img src=img/CB2/CB2_System33.png width="600" />

5、Open Mobaxterm and click "Session", and click "SSH", inset the device IP into Remote host and click "OK" (Note: your computer and the device needs to be in the same network).

<img src=img/CB2/CB2_System34.png width="600" />

6、Login as: `biqu` password: `biqu`

<img src=img/CB2/CB2_System35.png width="600" />

## **Precautions**

1、About 10 seconds after powering on, the system enters the kernel phase. At this time, the blue light stays on, and the green light flashes continuously, indicating that the system is running normally.

2、Root administrator:

​		Login: `root`

​		Password: `root`



​	BIQU user:

​		Login: `biqu`

​		Password: `biqu`

3、The PCIe M.2 interface does not support hot-plugging; the solid-state drive must be connected in advance for the device to be recognized.

4、When booting from eMMC, do not insert a MicroSD card. When booting from a MicroSD card, it is necessary to erase the data in the eMMC.



**Navigation:**

BIQU Official Website：                            				http://biqu3d.com

BIGTREETECH Official Website：            				 http://bigtree-tech.com

Online Store：                                           				 https://biqu.equipment

BIGTREETECH Official Group: 								  https://www.facebook.com/groups/bigtreetech

Discord: 																	   https://discord.gg/hhZsV7zk

Reddit:																		  https://www.reddit.com/r/BIGTREETECH/

